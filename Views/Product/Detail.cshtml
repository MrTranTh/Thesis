@model Thesis.Models.Entity.Product
@using Thesis.Models.Entity
@inject AppDbContext _db

@{
    ViewData["Title"] = "Chi tiết sản phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";
	List<ProductImages> listAnhSanPham = ViewBag.HinhAnhSanPham;
}
@if (Model != null)
{
	<div class="hero-wrap hero-bread" style="background-image: url('/TemplateMain/images/bg_6.jpg');">
		<div class="container">
			<div class="row no-gutters slider-text align-items-center justify-content-center">
				<div class="col-md-9 ftco-animate text-center">
					<p class="breadcrumbs"><span class="mr-2"><a href="/">Trang chủ</a></span> <span>Mua sắm</span></p>
					<h1 class="mb-0 bread">Mua sắm</h1>
				</div>
			</div>
		</div>
	</div>

	<section class="ftco-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 mb-5 ftco-animate">
					<a href="@Model.Image" class=""><img src="@Model.Image" class="img-fluid" alt="Lỗi hiển thị"></a>
				</div>
				<div class="col-lg-6 product-details pl-md-5 ftco-animate">
					<h3>@Model.Title</h3>
					<div class="rating d-flex">
						<p class="text-left mr-4">
							<a href="#" class="mr-2">5.0</a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
						</p>
						<p class="text-left mr-4">
							<a href="#" class="mr-2" style="color: #000;">100 <span style="color: #bbb;">Đánh giá</span></a>
						</p>
						<p class="text-left">
							<a href="#" class="mr-2" style="color: #000;">500 <span style="color: #bbb;">Đã bán</span></a>
						</p>
					</div>
						
					@if(Model.PriceSale != null)
					{
						<p class="price">Giá thường: <span style="text-decoration: line-through;">@string.Format("{0:N0} VNĐ", Model.Price)</span></p>
						<p class="price">Giá khuyến mãi: <span>@string.Format("{0:N0} VNĐ", Model.PriceSale)</span></p>
					}else{
						<p class="price">Giá thường: <span>@string.Format("{0:N0} VNĐ", Model.Price)</span></p>
					}
					@Html.Raw(Model.Detail)
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="form-group d-flex">
								<div class="select-wrap">
					  
								</div>
							</div>
						</div>
					 		<div class="w-100"></div>
							<div class="input-group col-md-6 d-flex mb-3">
					 <span class="input-group-btn mr-2">
						<button type="button" class="quantity-left-minus btn"  data-type="minus" data-field="">
						 <i class="ion-ios-remove"></i>
						</button>
					</span>
					<input type="text" id="quantity" name="quantity" class="quantity form-control input-number" value="1" min="1" max="100" >
					 <span class="input-group-btn ml-2">
						<button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
						 <i class="ion-ios-add"></i>
					 </button>
					 </span>
				  </div>
				  <div class="w-100"></div>
				  <div class="col-md-12">
					  <p style="color: #000;">@Model.Quantity sản phẩm sẵn có</p>
					  <p style="color: #000;">Lượng người truy cập: @Model.ViewCount </p>
				  </div>
			  </div>
					<p><a href="#" class="btn btn-black py-3 px-5 mr-2 btnAddToCartDetail" data-id="@Model.Id">Thêm vào giỏ hàng</a><a href="/Product" class="btn btn-primary py-3 px-5">Khám phá thêm</a></p>
				</div>
			</div>

			<div class="row mt-5">
				<div class="col-md-12 nav-link-wrap">
					<div class="nav nav-pills d-flex text-center" id="v-pills-tab" role="tablist" aria-orientation="vertical">
						<a class="nav-link ftco-animate active mr-lg-1" id="v-pills-1-tab" data-toggle="pill" href="#v-pills-1" role="tab" aria-controls="v-pills-1" aria-selected="true">Hình ảnh sản phẩm</a>

						<a class="nav-link ftco-animate mr-lg-1" id="v-pills-2-tab" data-toggle="pill" href="#v-pills-2" role="tab" aria-controls="v-pills-2" aria-selected="false">Hướng dẫn chọn size</a>

						<a class="nav-link ftco-animate" id="v-pills-3-tab" data-toggle="pill" href="#v-pills-3" role="tab" aria-controls="v-pills-3" aria-selected="false">Các đánh giá</a>

					</div>
				</div>
			<div class="col-md-12 tab-wrap">

				<div class="tab-content bg-light" id="v-pills-tabContent">

				  <div class="tab-pane fade show active" id="v-pills-1" role="tabpanel" aria-labelledby="day-1-tab">
					  <div class="p-4">
							<section class="ftco-section bg-light">
								<div class="container">
									<div class="row">
										@if (listAnhSanPham != null && listAnhSanPham.Any())
										{
											foreach (var item in listAnhSanPham)
											{
												<div class="col-sm-12 col-md-6 col-lg-3 ftco-animate d-flex">
													<div class="product d-flex flex-column">
														<a href="#" class="img-prod">
															<img class="img-fluid" src="@item.Image" alt="Lỗi hiển thị">
															<div class="overlay"></div>
														</a>
													</div>
												</div>
											}
										}				
											
									</div>
								</div>
							</section>					  
					  </div>
				  </div>

				  <div class="tab-pane fade" id="v-pills-2" role="tabpanel" aria-labelledby="v-pills-day-2-tab">
					  <div class="p-4">
						 <h3 class="mb-4">Hướng dẫn chọn size</h3>
						<img src="~/Size/size_ao_nam.jpeg" class="img-fluid" alt="Lỗi hiển thị">
						<img src="~/Size/size_ao_nu.jpeg" class="img-fluid" alt="Lỗi hiển thị">
						<p>Size quần nam</p>
						<img src="~/Size/size_quan_nam.png" class="img-fluid" alt="Lỗi hiển thị">
						<p>Size quần nữ</p>
						<img src="~/Size/size_quan_nu.png" class="img-fluid" alt="Lỗi hiển thị">
						</div>
				  </div>
				  <div class="tab-pane fade" id="v-pills-3" role="tabpanel" aria-labelledby="v-pills-day-3-tab">
					  <div class="row p-4">
							<div class="col-md-7">
								<h3 class="mb-4">3 lượt đánh giá</h3>
								<div class="review">
									<div class="user-img" style="background-image: url(/TemplateMain/images/person_1.jpg)"></div>
									<div class="desc">
										<h4>
											<span class="text-left">Trần Minh Long</span>
											<span class="text-right">20 tháng 4 năm 2024</span>
										</h4>
										<p class="star">
											<span>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
											</span>
											<span class="text-right"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
										</p>
										<p>Sản phẩm vượt xa mong đợi của tôi! Chất lượng vải tuyệt vời và đường may rất chắc chắn. Tôi cảm thấy rất tự tin khi mặc sản phẩm này. Rất hài lòng với dịch vụ và sản phẩm của cửa hàng.</p>
									</div>
								</div>
								<div class="review">
									<div class="user-img" style="background-image: url(/TemplateMain/images/person_2.jpg)"></div>
									<div class="desc">
										<h4>
											<span class="text-left">Trần Tuấn Sơn</span>
											<span class="text-right">24 tháng 3 năm 2024</span>
										</h4>
										<p class="star">
											<span>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
											</span>
											<span class="text-right"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
										</p>
										<p>Đã mua sản phẩm này cho bạn trai và anh ấy rất thích! Sự kết hợp giữa phong cách và thoải mái thực sự là điểm mạnh của sản phẩm này. Chắc chắn sẽ quay lại mua thêm.</p>
									</div>
								</div>
								<div class="review">
									<div class="user-img" style="background-image: url(/TemplateMain/images/person_3.jpg)"></div>
									<div class="desc">
										<h4>
											<span class="text-left">Vũ Minh Nguyên</span>
											<span class="text-right">7 tháng 4 năm 2024</span>
										</h4>
										<p class="star">
											<span>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
												<i class="ion-ios-star-outline"></i>
											</span>
											<span class="text-right"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
										</p>
											<p>Sản phẩm đẹp và giá cả hợp lý. Đặc biệt ấn tượng với sự phục vụ tận tình của nhân viên cửa hàng. Rất hài lòng với trải nghiệm mua sắm lần này và chắc chắn sẽ quay lại trong tương lai.</p>
									</div>
								</div>
							</div>

							<div class="col-md-4">
								<div class="rating-wrap">
									<h3 class="mb-4">Đưa ra đánh giá</h3>
									<p class="star">
										<span>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											(98%)
										</span>
										<span>20 đánh giá</span>
									</p>
									<p class="star">
										<span>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											(85%)
										</span>
										<span>10 đánh giá</span>
									</p>
									<p class="star">
										<span>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											(98%)
										</span>
										<span>5 đánh giá</span>
									</p>
									<p class="star">
										<span>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											(98%)
										</span>
										<span>0 đánh giá</span>
									</p>
									<p class="star">
										<span>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											<i class="ion-ios-star-outline"></i>
											(98%)
										</span>
										<span>0 đánh giá</span>
									</p>
								</div>
							</div>
					</div>
			  </div>
			</div>
		  </div>
		</div>
		</div>
	</section>
}

@section Scripts{	
	<script src="~/js/jsShopping.js"></script>
	<script>
		//Script cuả mẫu
		$(document).ready(function(){
			var quantitiy=0;
			$('.quantity-right-plus').click(function(e){

			// Stop acting like a button
				e.preventDefault();
				// Get the field name
				var quantity = parseInt($('#quantity').val());

			// If is not undefined

				$('#quantity').val(quantity + 1);


			// Increment

			});

			$('.quantity-left-minus').click(function(e){
				// Stop acting like a button
				e.preventDefault();
				// Get the field name
				var quantity = parseInt($('#quantity').val());

				// If is not undefined

				// Increment
				if(quantity>0){
					$('#quantity').val(quantity - 1);
				}
			});


			//
			
		});
		//Kết thúc script của mẫu

		// var inputQuantity = document.getElementById("quantity");
		// inputQuantity.addEventListener("input", function () {
		// 	var newValue = inputQuantity.value;
		// 	$.ajax({
		// 		type: "POST",
		// 		url: "/ShoppingCart/AddToCartDetail",
		// 		data: { quantity: newValue , id = },
		// 		success: function (response) {
		// 			console.log("Giá trị đã được gửi lên server thành công.");
		// 		},
		// 		error: function (xhr, status, error) {
		// 			console.error("Lỗi: " + error);
		// 		}
		// 	});
		// });
	</script>
}

